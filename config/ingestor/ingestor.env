# Ingestor Service Configuration
# ================================
# Infrastructure params (DATABASE_URL, NATS_URL, MINIO endpoint/credentials,
# QDRANT host/port, EMBEDDER host/port) are set via docker-compose
# environment from central .env

# Service Settings
INGESTOR_ENABLED=true
INGESTOR_HEALTH_PORT=8080

# Database
INGESTOR_DATABASE_ECHO=false

# NATS (stream/consumer names are service-specific)
INGESTOR_NATS_STREAM_NAME=ECHOMIND
INGESTOR_NATS_CONSUMER_NAME=ingestor-consumer

# MinIO (bucket name is service-specific)
INGESTOR_MINIO_SECURE=false
INGESTOR_MINIO_BUCKET=echomind-documents

# Qdrant
# INGESTOR_QDRANT_API_KEY=  # Uncomment if Qdrant requires authentication

# Embedder gRPC
# TODO: Revert to 30.0 once embedder runs on GPU
INGESTOR_EMBEDDER_TIMEOUT=600

# nv-ingest Extraction Settings
# Extraction method: pdfium (fast), pdfium_hybrid, nemotron_parse (requires NIM)
INGESTOR_EXTRACT_METHOD=pdfium

# Chunking Settings (in TOKENS, not characters)
INGESTOR_CHUNK_SIZE=512
INGESTOR_CHUNK_OVERLAP=50

# Tokenizer for chunking (HuggingFace model)
# Use gpt2 for local dev, meta-llama/Llama-3.2-1B for production
INGESTOR_TOKENIZER=gpt2

# Optional NIMs (set to true if NIMs are deployed)
# YOLOX: Table and chart detection
INGESTOR_YOLOX_ENABLED=false
INGESTOR_YOLOX_ENDPOINT=http://yolox-nim:8000

# Riva: Audio transcription
INGESTOR_RIVA_ENABLED=false
INGESTOR_RIVA_ENDPOINT=riva:50051

# Retry Settings
INGESTOR_MAX_RETRIES=3
INGESTOR_RETRY_BASE_DELAY=1.0

# Logging
INGESTOR_LOG_LEVEL=INFO
